function yt(n,r){const t=(r||{}).includeImageAlt;return vn(n,typeof t=="boolean"?t:!0)}function vn(n,r){return St(n)&&("value"in n&&n.value||r&&"alt"in n&&n.alt||"children"in n&&jn(n.children,r))||Array.isArray(n)&&jn(n,r)||""}function jn(n,r){const t=[];let e=-1;for(;++e<n.length;)t[e]=vn(n[e],r);return t.join("")}function St(n){return Boolean(n&&typeof n=="object")}function en(n,r,t,e){const i=n.length;let u=0,l;if(r<0?r=-r>i?0:i+r:r=r>i?i:r,t=t>0?t:0,e.length<1e4)l=Array.from(e),l.unshift(r,t),[].splice.apply(n,l);else for(t&&[].splice.apply(n,[r,t]);u<e.length;)l=e.slice(u,u+1e4),l.unshift(r,0),[].splice.apply(n,l),u+=1e4,r+=1e4}function Z(n,r){return n.length>0?(en(n,n.length,0,r),n):r}const Hn={}.hasOwnProperty;function Ct(n){const r={};let t=-1;for(;++t<n.length;)Et(r,n[t]);return r}function Et(n,r){let t;for(t in r){const i=(Hn.call(n,t)?n[t]:void 0)||(n[t]={}),u=r[t];let l;for(l in u){Hn.call(i,l)||(i[l]=[]);const a=u[l];wt(i[l],Array.isArray(a)?a:a?[a]:[])}}}function wt(n,r){let t=-1;const e=[];for(;++t<r.length;)(r[t].add==="after"?n:e).push(r[t]);en(n,0,0,e)}const At=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,tn=sn(/[A-Za-z]/),An=sn(/\d/),zt=sn(/[\dA-Fa-f]/),v=sn(/[\dA-Za-z]/),It=sn(/[!-/:-@[-`{-~]/),Vn=sn(/[#-'*+\--9=?A-Z^-~]/);function zn(n){return n!==null&&(n<32||n===127)}function Y(n){return n!==null&&(n<0||n===32)}function w(n){return n!==null&&n<-2}function j(n){return n===-2||n===-1||n===32}const Bt=sn(/\s/),Tt=sn(At);function sn(n){return r;function r(t){return t!==null&&n.test(String.fromCharCode(t))}}function B(n,r,t,e){const i=e?e-1:Number.POSITIVE_INFINITY;let u=0;return l;function l(c){return j(c)?(n.enter(t),a(c)):r(c)}function a(c){return j(c)&&u++<i?(n.consume(c),a):(n.exit(t),r(c))}}const Dt={tokenize:Lt};function Lt(n){const r=n.attempt(this.parser.constructs.contentInitial,e,i);let t;return r;function e(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),B(n,r,"linePrefix")}function i(a){return n.enter("paragraph"),u(a)}function u(a){const c=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=c),t=c,l(a)}function l(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return w(a)?(n.consume(a),n.exit("chunkText"),u):(n.consume(a),l)}}const Ot={tokenize:Pt},Nn={tokenize:_t};function Pt(n){const r=this,t=[];let e=0,i,u,l;return a;function a(S){if(e<t.length){const D=t[e];return r.containerState=D[1],n.attempt(D[0].continuation,c,p)(S)}return p(S)}function c(S){if(e++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,i&&_();const D=r.events.length;let L=D,d;for(;L--;)if(r.events[L][0]==="exit"&&r.events[L][1].type==="chunkFlow"){d=r.events[L][1].end;break}F(e);let P=D;for(;P<r.events.length;)r.events[P][1].end=Object.assign({},d),P++;return en(r.events,L+1,0,r.events.slice(D)),r.events.length=P,p(S)}return a(S)}function p(S){if(e===t.length){if(!i)return g(S);if(i.currentConstruct&&i.currentConstruct.concrete)return k(S);r.interrupt=Boolean(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return r.containerState={},n.check(Nn,h,x)(S)}function h(S){return i&&_(),F(e),g(S)}function x(S){return r.parser.lazy[r.now().line]=e!==t.length,l=r.now().offset,k(S)}function g(S){return r.containerState={},n.attempt(Nn,f,k)(S)}function f(S){return e++,t.push([r.currentConstruct,r.containerState]),g(S)}function k(S){if(S===null){i&&_(),F(0),n.consume(S);return}return i=i||r.parser.flow(r.now()),n.enter("chunkFlow",{contentType:"flow",previous:u,_tokenizer:i}),T(S)}function T(S){if(S===null){O(n.exit("chunkFlow"),!0),F(0),n.consume(S);return}return w(S)?(n.consume(S),O(n.exit("chunkFlow")),e=0,r.interrupt=void 0,a):(n.consume(S),T)}function O(S,D){const L=r.sliceStream(S);if(D&&L.push(null),S.previous=u,u&&(u.next=S),u=S,i.defineSkip(S.start),i.write(L),r.parser.lazy[S.start.line]){let d=i.events.length;for(;d--;)if(i.events[d][1].start.offset<l&&(!i.events[d][1].end||i.events[d][1].end.offset>l))return;const P=r.events.length;let R=P,q,N;for(;R--;)if(r.events[R][0]==="exit"&&r.events[R][1].type==="chunkFlow"){if(q){N=r.events[R][1].end;break}q=!0}for(F(e),d=P;d<r.events.length;)r.events[d][1].end=Object.assign({},N),d++;en(r.events,R+1,0,r.events.slice(P)),r.events.length=d}}function F(S){let D=t.length;for(;D-- >S;){const L=t[D];r.containerState=L[1],L[0].exit.call(r,n)}t.length=S}function _(){i.write([null]),u=void 0,i=void 0,r.containerState._closeFlow=void 0}}function _t(n,r,t){return B(n,n.attempt(this.parser.constructs.document,r,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Qn(n){if(n===null||Y(n)||Bt(n))return 1;if(Tt(n))return 2}function Tn(n,r,t){const e=[];let i=-1;for(;++i<n.length;){const u=n[i].resolveAll;u&&!e.includes(u)&&(r=u(r,t),e.push(u))}return r}const In={name:"attention",tokenize:Rt,resolveAll:Mt};function Mt(n,r){let t=-1,e,i,u,l,a,c,p,h;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(e=t;e--;)if(n[e][0]==="exit"&&n[e][1].type==="attentionSequence"&&n[e][1]._open&&r.sliceSerialize(n[e][1]).charCodeAt(0)===r.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[e][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[e][1].end.offset-n[e][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;c=n[e][1].end.offset-n[e][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const x=Object.assign({},n[e][1].end),g=Object.assign({},n[t][1].start);Un(x,-c),Un(g,c),l={type:c>1?"strongSequence":"emphasisSequence",start:x,end:Object.assign({},n[e][1].end)},a={type:c>1?"strongSequence":"emphasisSequence",start:Object.assign({},n[t][1].start),end:g},u={type:c>1?"strongText":"emphasisText",start:Object.assign({},n[e][1].end),end:Object.assign({},n[t][1].start)},i={type:c>1?"strong":"emphasis",start:Object.assign({},l.start),end:Object.assign({},a.end)},n[e][1].end=Object.assign({},l.start),n[t][1].start=Object.assign({},a.end),p=[],n[e][1].end.offset-n[e][1].start.offset&&(p=Z(p,[["enter",n[e][1],r],["exit",n[e][1],r]])),p=Z(p,[["enter",i,r],["enter",l,r],["exit",l,r],["enter",u,r]]),p=Z(p,Tn(r.parser.constructs.insideSpan.null,n.slice(e+1,t),r)),p=Z(p,[["exit",u,r],["enter",a,r],["exit",a,r],["exit",i,r]]),n[t][1].end.offset-n[t][1].start.offset?(h=2,p=Z(p,[["enter",n[t][1],r],["exit",n[t][1],r]])):h=0,en(n,e-1,t-e+3,p),t=e+p.length-h-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function Rt(n,r){const t=this.parser.constructs.attentionMarkers.null,e=this.previous,i=Qn(e);let u;return l;function l(c){return n.enter("attentionSequence"),u=c,a(c)}function a(c){if(c===u)return n.consume(c),a;const p=n.exit("attentionSequence"),h=Qn(c),x=!h||h===2&&i||t.includes(c),g=!i||i===2&&h||t.includes(e);return p._open=Boolean(u===42?x:x&&(i||!g)),p._close=Boolean(u===42?g:g&&(h||!x)),r(c)}}function Un(n,r){n.column+=r,n.offset+=r,n._bufferIndex+=r}const qt={name:"autolink",tokenize:jt};function jt(n,r,t){let e=1;return i;function i(k){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(k),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),u}function u(k){return tn(k)?(n.consume(k),l):Vn(k)?p(k):t(k)}function l(k){return k===43||k===45||k===46||v(k)?a(k):p(k)}function a(k){return k===58?(n.consume(k),c):(k===43||k===45||k===46||v(k))&&e++<32?(n.consume(k),a):p(k)}function c(k){return k===62?(n.exit("autolinkProtocol"),f(k)):k===null||k===32||k===60||zn(k)?t(k):(n.consume(k),c)}function p(k){return k===64?(n.consume(k),e=0,h):Vn(k)?(n.consume(k),p):t(k)}function h(k){return v(k)?x(k):t(k)}function x(k){return k===46?(n.consume(k),e=0,h):k===62?(n.exit("autolinkProtocol").type="autolinkEmail",f(k)):g(k)}function g(k){return(k===45||v(k))&&e++<63?(n.consume(k),k===45?g:x):t(k)}function f(k){return n.enter("autolinkMarker"),n.consume(k),n.exit("autolinkMarker"),n.exit("autolink"),r}}const yn={tokenize:Ht,partial:!0};function Ht(n,r,t){return B(n,e,"linePrefix");function e(i){return i===null||w(i)?r(i):t(i)}}const nt={name:"blockQuote",tokenize:Vt,continuation:{tokenize:Nt},exit:Qt};function Vt(n,r,t){const e=this;return i;function i(l){if(l===62){const a=e.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(l),n.exit("blockQuoteMarker"),u}return t(l)}function u(l){return j(l)?(n.enter("blockQuotePrefixWhitespace"),n.consume(l),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),r):(n.exit("blockQuotePrefix"),r(l))}}function Nt(n,r,t){return B(n,n.attempt(nt,r,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Qt(n){n.exit("blockQuote")}const tt={name:"characterEscape",tokenize:Ut};function Ut(n,r,t){return e;function e(u){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(u),n.exit("escapeMarker"),i}function i(u){return It(u)?(n.enter("characterEscapeValue"),n.consume(u),n.exit("characterEscapeValue"),n.exit("characterEscape"),r):t(u)}}const Wn=document.createElement("i");function Dn(n){const r="&"+n+";";Wn.innerHTML=r;const t=Wn.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===r?!1:t}const et={name:"characterReference",tokenize:Wt};function Wt(n,r,t){const e=this;let i=0,u,l;return a;function a(x){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(x),n.exit("characterReferenceMarker"),c}function c(x){return x===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(x),n.exit("characterReferenceMarkerNumeric"),p):(n.enter("characterReferenceValue"),u=31,l=v,h(x))}function p(x){return x===88||x===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(x),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),u=6,l=zt,h):(n.enter("characterReferenceValue"),u=7,l=An,h(x))}function h(x){let g;return x===59&&i?(g=n.exit("characterReferenceValue"),l===v&&!Dn(e.sliceSerialize(g))?t(x):(n.enter("characterReferenceMarker"),n.consume(x),n.exit("characterReferenceMarker"),n.exit("characterReference"),r)):l(x)&&i++<u?(n.consume(x),h):t(x)}}const $n={name:"codeFenced",tokenize:$t,concrete:!0};function $t(n,r,t){const e=this,i={tokenize:L,partial:!0},u={tokenize:D,partial:!0},l=this.events[this.events.length-1],a=l&&l[1].type==="linePrefix"?l[2].sliceSerialize(l[1],!0).length:0;let c=0,p;return h;function h(d){return n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),p=d,x(d)}function x(d){return d===p?(n.consume(d),c++,x):(n.exit("codeFencedFenceSequence"),c<3?t(d):B(n,g,"whitespace")(d))}function g(d){return d===null||w(d)?O(d):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),f(d))}function f(d){return d===null||Y(d)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),B(n,k,"whitespace")(d)):d===96&&d===p?t(d):(n.consume(d),f)}function k(d){return d===null||w(d)?O(d):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),T(d))}function T(d){return d===null||w(d)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),O(d)):d===96&&d===p?t(d):(n.consume(d),T)}function O(d){return n.exit("codeFencedFence"),e.interrupt?r(d):F(d)}function F(d){return d===null?S(d):w(d)?n.attempt(u,n.attempt(i,S,a?B(n,F,"linePrefix",a+1):F),S)(d):(n.enter("codeFlowValue"),_(d))}function _(d){return d===null||w(d)?(n.exit("codeFlowValue"),F(d)):(n.consume(d),_)}function S(d){return n.exit("codeFenced"),r(d)}function D(d,P,R){const q=this;return N;function N(C){return d.enter("lineEnding"),d.consume(C),d.exit("lineEnding"),y}function y(C){return q.parser.lazy[q.now().line]?R(C):P(C)}}function L(d,P,R){let q=0;return B(d,N,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function N(A){return d.enter("codeFencedFence"),d.enter("codeFencedFenceSequence"),y(A)}function y(A){return A===p?(d.consume(A),q++,y):q<c?R(A):(d.exit("codeFencedFenceSequence"),B(d,C,"whitespace")(A))}function C(A){return A===null||w(A)?(d.exit("codeFencedFence"),P(A)):R(A)}}}const En={name:"codeIndented",tokenize:Yt},Zt={tokenize:Gt,partial:!0};function Yt(n,r,t){const e=this;return i;function i(p){return n.enter("codeIndented"),B(n,u,"linePrefix",4+1)(p)}function u(p){const h=e.events[e.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?l(p):t(p)}function l(p){return p===null?c(p):w(p)?n.attempt(Zt,l,c)(p):(n.enter("codeFlowValue"),a(p))}function a(p){return p===null||w(p)?(n.exit("codeFlowValue"),l(p)):(n.consume(p),a)}function c(p){return n.exit("codeIndented"),r(p)}}function Gt(n,r,t){const e=this;return i;function i(l){return e.parser.lazy[e.now().line]?t(l):w(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),i):B(n,u,"linePrefix",4+1)(l)}function u(l){const a=e.events[e.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?r(l):w(l)?i(l):t(l)}}const Jt={name:"codeText",tokenize:vt,resolve:Kt,previous:Xt};function Kt(n){let r=n.length-4,t=3,e,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[r][1].type==="lineEnding"||n[r][1].type==="space")){for(e=t;++e<r;)if(n[e][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[r][1].type="codeTextPadding",t+=2,r-=2;break}}for(e=t-1,r++;++e<=r;)i===void 0?e!==r&&n[e][1].type!=="lineEnding"&&(i=e):(e===r||n[e][1].type==="lineEnding")&&(n[i][1].type="codeTextData",e!==i+2&&(n[i][1].end=n[e-1][1].end,n.splice(i+2,e-i-2),r-=e-i-2,e=i+2),i=void 0);return n}function Xt(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function vt(n,r,t){let e=0,i,u;return l;function l(x){return n.enter("codeText"),n.enter("codeTextSequence"),a(x)}function a(x){return x===96?(n.consume(x),e++,a):(n.exit("codeTextSequence"),c(x))}function c(x){return x===null?t(x):x===96?(u=n.enter("codeTextSequence"),i=0,h(x)):x===32?(n.enter("space"),n.consume(x),n.exit("space"),c):w(x)?(n.enter("lineEnding"),n.consume(x),n.exit("lineEnding"),c):(n.enter("codeTextData"),p(x))}function p(x){return x===null||x===32||x===96||w(x)?(n.exit("codeTextData"),c(x)):(n.consume(x),p)}function h(x){return x===96?(n.consume(x),i++,h):i===e?(n.exit("codeTextSequence"),n.exit("codeText"),r(x)):(u.type="codeTextData",p(x))}}function rt(n){const r={};let t=-1,e,i,u,l,a,c,p;for(;++t<n.length;){for(;t in r;)t=r[t];if(e=n[t],t&&e[1].type==="chunkFlow"&&n[t-1][1].type==="listItemPrefix"&&(c=e[1]._tokenizer.events,u=0,u<c.length&&c[u][1].type==="lineEndingBlank"&&(u+=2),u<c.length&&c[u][1].type==="content"))for(;++u<c.length&&c[u][1].type!=="content";)c[u][1].type==="chunkText"&&(c[u][1]._isInFirstContentOfListItem=!0,u++);if(e[0]==="enter")e[1].contentType&&(Object.assign(r,ne(n,t)),t=r[t],p=!0);else if(e[1]._container){for(u=t,i=void 0;u--&&(l=n[u],l[1].type==="lineEnding"||l[1].type==="lineEndingBlank");)l[0]==="enter"&&(i&&(n[i][1].type="lineEndingBlank"),l[1].type="lineEnding",i=u);i&&(e[1].end=Object.assign({},n[i][1].start),a=n.slice(i,t),a.unshift(e),en(n,i,t-i+1,a))}}return!p}function ne(n,r){const t=n[r][1],e=n[r][2];let i=r-1;const u=[],l=t._tokenizer||e.parser[t.contentType](t.start),a=l.events,c=[],p={};let h,x,g=-1,f=t,k=0,T=0;const O=[T];for(;f;){for(;n[++i][1]!==f;);u.push(i),f._tokenizer||(h=e.sliceStream(f),f.next||h.push(null),x&&l.defineSkip(f.start),f._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(h),f._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),x=f,f=f.next}for(f=t;++g<a.length;)a[g][0]==="exit"&&a[g-1][0]==="enter"&&a[g][1].type===a[g-1][1].type&&a[g][1].start.line!==a[g][1].end.line&&(T=g+1,O.push(T),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(l.events=[],f?(f._tokenizer=void 0,f.previous=void 0):O.pop(),g=O.length;g--;){const F=a.slice(O[g],O[g+1]),_=u.pop();c.unshift([_,_+F.length-1]),en(n,_,2,F)}for(g=-1;++g<c.length;)p[k+c[g][0]]=k+c[g][1],k+=c[g][1]-c[g][0]-1;return p}const te={tokenize:ie,resolve:re},ee={tokenize:ue,partial:!0};function re(n){return rt(n),n}function ie(n,r){let t;return e;function e(a){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?u(a):w(a)?n.check(ee,l,u)(a):(n.consume(a),i)}function u(a){return n.exit("chunkContent"),n.exit("content"),r(a)}function l(a){return n.consume(a),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function ue(n,r,t){const e=this;return i;function i(l){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),B(n,u,"linePrefix")}function u(l){if(l===null||w(l))return t(l);const a=e.events[e.events.length-1];return!e.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?r(l):n.interrupt(e.parser.constructs.flow,t,r)(l)}}function it(n,r,t,e,i,u,l,a,c){const p=c||Number.POSITIVE_INFINITY;let h=0;return x;function x(F){return F===60?(n.enter(e),n.enter(i),n.enter(u),n.consume(F),n.exit(u),g):F===null||F===41||zn(F)?t(F):(n.enter(e),n.enter(l),n.enter(a),n.enter("chunkString",{contentType:"string"}),T(F))}function g(F){return F===62?(n.enter(u),n.consume(F),n.exit(u),n.exit(i),n.exit(e),r):(n.enter(a),n.enter("chunkString",{contentType:"string"}),f(F))}function f(F){return F===62?(n.exit("chunkString"),n.exit(a),g(F)):F===null||F===60||w(F)?t(F):(n.consume(F),F===92?k:f)}function k(F){return F===60||F===62||F===92?(n.consume(F),f):f(F)}function T(F){return F===40?++h>p?t(F):(n.consume(F),T):F===41?h--?(n.consume(F),T):(n.exit("chunkString"),n.exit(a),n.exit(l),n.exit(e),r(F)):F===null||Y(F)?h?t(F):(n.exit("chunkString"),n.exit(a),n.exit(l),n.exit(e),r(F)):zn(F)?t(F):(n.consume(F),F===92?O:T)}function O(F){return F===40||F===41||F===92?(n.consume(F),T):T(F)}}function ut(n,r,t,e,i,u){const l=this;let a=0,c;return p;function p(f){return n.enter(e),n.enter(i),n.consume(f),n.exit(i),n.enter(u),h}function h(f){return f===null||f===91||f===93&&!c||f===94&&!a&&"_hiddenFootnoteSupport"in l.parser.constructs||a>999?t(f):f===93?(n.exit(u),n.enter(i),n.consume(f),n.exit(i),n.exit(e),r):w(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),h):(n.enter("chunkString",{contentType:"string"}),x(f))}function x(f){return f===null||f===91||f===93||w(f)||a++>999?(n.exit("chunkString"),h(f)):(n.consume(f),c=c||!j(f),f===92?g:x)}function g(f){return f===91||f===92||f===93?(n.consume(f),a++,x):x(f)}}function lt(n,r,t,e,i,u){let l;return a;function a(g){return n.enter(e),n.enter(i),n.consume(g),n.exit(i),l=g===40?41:g,c}function c(g){return g===l?(n.enter(i),n.consume(g),n.exit(i),n.exit(e),r):(n.enter(u),p(g))}function p(g){return g===l?(n.exit(u),c(l)):g===null?t(g):w(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),B(n,p,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),h(g))}function h(g){return g===l||g===null||w(g)?(n.exit("chunkString"),p(g)):(n.consume(g),g===92?x:h)}function x(g){return g===l||g===92?(n.consume(g),h):h(g)}}function dn(n,r){let t;return e;function e(i){return w(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),t=!0,e):j(i)?B(n,e,t?"linePrefix":"lineSuffix")(i):r(i)}}function fn(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const le={name:"definition",tokenize:oe},ae={tokenize:se,partial:!0};function oe(n,r,t){const e=this;let i;return u;function u(c){return n.enter("definition"),ut.call(e,n,l,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(c)}function l(c){return i=fn(e.sliceSerialize(e.events[e.events.length-1][1]).slice(1,-1)),c===58?(n.enter("definitionMarker"),n.consume(c),n.exit("definitionMarker"),dn(n,it(n,n.attempt(ae,B(n,a,"whitespace"),B(n,a,"whitespace")),t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):t(c)}function a(c){return c===null||w(c)?(n.exit("definition"),e.parser.defined.includes(i)||e.parser.defined.push(i),r(c)):t(c)}}function se(n,r,t){return e;function e(l){return Y(l)?dn(n,i)(l):t(l)}function i(l){return l===34||l===39||l===40?lt(n,B(n,u,"whitespace"),t,"definitionTitle","definitionTitleMarker","definitionTitleString")(l):t(l)}function u(l){return l===null||w(l)?r(l):t(l)}}const ce={name:"hardBreakEscape",tokenize:he};function he(n,r,t){return e;function e(u){return n.enter("hardBreakEscape"),n.enter("escapeMarker"),n.consume(u),i}function i(u){return w(u)?(n.exit("escapeMarker"),n.exit("hardBreakEscape"),r(u)):t(u)}}const pe={name:"headingAtx",tokenize:fe,resolve:me};function me(n,r){let t=n.length-2,e=3,i,u;return n[e][1].type==="whitespace"&&(e+=2),t-2>e&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(e===t-1||t-4>e&&n[t-2][1].type==="whitespace")&&(t-=e+1===t?2:4),t>e&&(i={type:"atxHeadingText",start:n[e][1].start,end:n[t][1].end},u={type:"chunkText",start:n[e][1].start,end:n[t][1].end,contentType:"text"},en(n,e,t-e+1,[["enter",i,r],["enter",u,r],["exit",u,r],["exit",i,r]])),n}function fe(n,r,t){const e=this;let i=0;return u;function u(h){return n.enter("atxHeading"),n.enter("atxHeadingSequence"),l(h)}function l(h){return h===35&&i++<6?(n.consume(h),l):h===null||Y(h)?(n.exit("atxHeadingSequence"),e.interrupt?r(h):a(h)):t(h)}function a(h){return h===35?(n.enter("atxHeadingSequence"),c(h)):h===null||w(h)?(n.exit("atxHeading"),r(h)):j(h)?B(n,a,"whitespace")(h):(n.enter("atxHeadingText"),p(h))}function c(h){return h===35?(n.consume(h),c):(n.exit("atxHeadingSequence"),a(h))}function p(h){return h===null||h===35||Y(h)?(n.exit("atxHeadingText"),a(h)):(n.consume(h),p)}}const xe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Zn=["pre","script","style","textarea"],ge={name:"htmlFlow",tokenize:be,resolveTo:de,concrete:!0},ke={tokenize:Fe,partial:!0};function de(n){let r=n.length;for(;r--&&!(n[r][0]==="enter"&&n[r][1].type==="htmlFlow"););return r>1&&n[r-2][1].type==="linePrefix"&&(n[r][1].start=n[r-2][1].start,n[r+1][1].start=n[r-2][1].start,n.splice(r-2,2)),n}function be(n,r,t){const e=this;let i,u,l,a,c;return p;function p(o){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(o),h}function h(o){return o===33?(n.consume(o),x):o===47?(n.consume(o),k):o===63?(n.consume(o),i=3,e.interrupt?r:W):tn(o)?(n.consume(o),l=String.fromCharCode(o),u=!0,T):t(o)}function x(o){return o===45?(n.consume(o),i=2,g):o===91?(n.consume(o),i=5,l="CDATA[",a=0,f):tn(o)?(n.consume(o),i=4,e.interrupt?r:W):t(o)}function g(o){return o===45?(n.consume(o),e.interrupt?r:W):t(o)}function f(o){return o===l.charCodeAt(a++)?(n.consume(o),a===l.length?e.interrupt?r:y:f):t(o)}function k(o){return tn(o)?(n.consume(o),l=String.fromCharCode(o),T):t(o)}function T(o){return o===null||o===47||o===62||Y(o)?o!==47&&u&&Zn.includes(l.toLowerCase())?(i=1,e.interrupt?r(o):y(o)):xe.includes(l.toLowerCase())?(i=6,o===47?(n.consume(o),O):e.interrupt?r(o):y(o)):(i=7,e.interrupt&&!e.parser.lazy[e.now().line]?t(o):u?_(o):F(o)):o===45||v(o)?(n.consume(o),l+=String.fromCharCode(o),T):t(o)}function O(o){return o===62?(n.consume(o),e.interrupt?r:y):t(o)}function F(o){return j(o)?(n.consume(o),F):q(o)}function _(o){return o===47?(n.consume(o),q):o===58||o===95||tn(o)?(n.consume(o),S):j(o)?(n.consume(o),_):q(o)}function S(o){return o===45||o===46||o===58||o===95||v(o)?(n.consume(o),S):D(o)}function D(o){return o===61?(n.consume(o),L):j(o)?(n.consume(o),D):_(o)}function L(o){return o===null||o===60||o===61||o===62||o===96?t(o):o===34||o===39?(n.consume(o),c=o,d):j(o)?(n.consume(o),L):(c=null,P(o))}function d(o){return o===null||w(o)?t(o):o===c?(n.consume(o),R):(n.consume(o),d)}function P(o){return o===null||o===34||o===39||o===60||o===61||o===62||o===96||Y(o)?D(o):(n.consume(o),P)}function R(o){return o===47||o===62||j(o)?_(o):t(o)}function q(o){return o===62?(n.consume(o),N):t(o)}function N(o){return j(o)?(n.consume(o),N):o===null||w(o)?y(o):t(o)}function y(o){return o===45&&i===2?(n.consume(o),G):o===60&&i===1?(n.consume(o),nn):o===62&&i===4?(n.consume(o),H):o===63&&i===3?(n.consume(o),W):o===93&&i===5?(n.consume(o),Q):w(o)&&(i===6||i===7)?n.check(ke,H,C)(o):o===null||w(o)?C(o):(n.consume(o),y)}function C(o){return n.exit("htmlFlowData"),A(o)}function A(o){return o===null?s(o):w(o)?n.attempt({tokenize:U,partial:!0},A,s)(o):(n.enter("htmlFlowData"),y(o))}function U(o,cn,xn){return hn;function hn(K){return o.enter("lineEnding"),o.consume(K),o.exit("lineEnding"),V}function V(K){return e.parser.lazy[e.now().line]?xn(K):cn(K)}}function G(o){return o===45?(n.consume(o),W):y(o)}function nn(o){return o===47?(n.consume(o),l="",J):y(o)}function J(o){return o===62&&Zn.includes(l.toLowerCase())?(n.consume(o),H):tn(o)&&l.length<8?(n.consume(o),l+=String.fromCharCode(o),J):y(o)}function Q(o){return o===93?(n.consume(o),W):y(o)}function W(o){return o===62?(n.consume(o),H):o===45&&i===2?(n.consume(o),W):y(o)}function H(o){return o===null||w(o)?(n.exit("htmlFlowData"),s(o)):(n.consume(o),H)}function s(o){return n.exit("htmlFlow"),r(o)}}function Fe(n,r,t){return e;function e(i){return n.exit("htmlFlowData"),n.enter("lineEndingBlank"),n.consume(i),n.exit("lineEndingBlank"),n.attempt(yn,r,t)}}const ye={name:"htmlText",tokenize:Se};function Se(n,r,t){const e=this;let i,u,l,a;return c;function c(s){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(s),p}function p(s){return s===33?(n.consume(s),h):s===47?(n.consume(s),P):s===63?(n.consume(s),L):tn(s)?(n.consume(s),N):t(s)}function h(s){return s===45?(n.consume(s),x):s===91?(n.consume(s),u="CDATA[",l=0,O):tn(s)?(n.consume(s),D):t(s)}function x(s){return s===45?(n.consume(s),g):t(s)}function g(s){return s===null||s===62?t(s):s===45?(n.consume(s),f):k(s)}function f(s){return s===null||s===62?t(s):k(s)}function k(s){return s===null?t(s):s===45?(n.consume(s),T):w(s)?(a=k,Q(s)):(n.consume(s),k)}function T(s){return s===45?(n.consume(s),H):k(s)}function O(s){return s===u.charCodeAt(l++)?(n.consume(s),l===u.length?F:O):t(s)}function F(s){return s===null?t(s):s===93?(n.consume(s),_):w(s)?(a=F,Q(s)):(n.consume(s),F)}function _(s){return s===93?(n.consume(s),S):F(s)}function S(s){return s===62?H(s):s===93?(n.consume(s),S):F(s)}function D(s){return s===null||s===62?H(s):w(s)?(a=D,Q(s)):(n.consume(s),D)}function L(s){return s===null?t(s):s===63?(n.consume(s),d):w(s)?(a=L,Q(s)):(n.consume(s),L)}function d(s){return s===62?H(s):L(s)}function P(s){return tn(s)?(n.consume(s),R):t(s)}function R(s){return s===45||v(s)?(n.consume(s),R):q(s)}function q(s){return w(s)?(a=q,Q(s)):j(s)?(n.consume(s),q):H(s)}function N(s){return s===45||v(s)?(n.consume(s),N):s===47||s===62||Y(s)?y(s):t(s)}function y(s){return s===47?(n.consume(s),H):s===58||s===95||tn(s)?(n.consume(s),C):w(s)?(a=y,Q(s)):j(s)?(n.consume(s),y):H(s)}function C(s){return s===45||s===46||s===58||s===95||v(s)?(n.consume(s),C):A(s)}function A(s){return s===61?(n.consume(s),U):w(s)?(a=A,Q(s)):j(s)?(n.consume(s),A):y(s)}function U(s){return s===null||s===60||s===61||s===62||s===96?t(s):s===34||s===39?(n.consume(s),i=s,G):w(s)?(a=U,Q(s)):j(s)?(n.consume(s),U):(n.consume(s),i=void 0,J)}function G(s){return s===i?(n.consume(s),nn):s===null?t(s):w(s)?(a=G,Q(s)):(n.consume(s),G)}function nn(s){return s===62||s===47||Y(s)?y(s):t(s)}function J(s){return s===null||s===34||s===39||s===60||s===61||s===96?t(s):s===62||Y(s)?y(s):(n.consume(s),J)}function Q(s){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),B(n,W,"linePrefix",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function W(s){return n.enter("htmlTextData"),a(s)}function H(s){return s===62?(n.consume(s),n.exit("htmlTextData"),n.exit("htmlText"),r):t(s)}}const Ln={name:"labelEnd",tokenize:Ie,resolveTo:ze,resolveAll:Ae},Ce={tokenize:Be},Ee={tokenize:Te},we={tokenize:De};function Ae(n){let r=-1,t;for(;++r<n.length;)t=n[r][1],(t.type==="labelImage"||t.type==="labelLink"||t.type==="labelEnd")&&(n.splice(r+1,t.type==="labelImage"?4:2),t.type="data",r++);return n}function ze(n,r){let t=n.length,e=0,i,u,l,a;for(;t--;)if(i=n[t][1],u){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(n[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(u=t,i.type!=="labelLink")){e=2;break}}else i.type==="labelEnd"&&(l=t);const c={type:n[u][1].type==="labelLink"?"link":"image",start:Object.assign({},n[u][1].start),end:Object.assign({},n[n.length-1][1].end)},p={type:"label",start:Object.assign({},n[u][1].start),end:Object.assign({},n[l][1].end)},h={type:"labelText",start:Object.assign({},n[u+e+2][1].end),end:Object.assign({},n[l-2][1].start)};return a=[["enter",c,r],["enter",p,r]],a=Z(a,n.slice(u+1,u+e+3)),a=Z(a,[["enter",h,r]]),a=Z(a,Tn(r.parser.constructs.insideSpan.null,n.slice(u+e+4,l-3),r)),a=Z(a,[["exit",h,r],n[l-2],n[l-1],["exit",p,r]]),a=Z(a,n.slice(l+1)),a=Z(a,[["exit",c,r]]),en(n,u,n.length,a),n}function Ie(n,r,t){const e=this;let i=e.events.length,u,l;for(;i--;)if((e.events[i][1].type==="labelImage"||e.events[i][1].type==="labelLink")&&!e.events[i][1]._balanced){u=e.events[i][1];break}return a;function a(h){return u?u._inactive?p(h):(l=e.parser.defined.includes(fn(e.sliceSerialize({start:u.end,end:e.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(h),n.exit("labelMarker"),n.exit("labelEnd"),c):t(h)}function c(h){return h===40?n.attempt(Ce,r,l?r:p)(h):h===91?n.attempt(Ee,r,l?n.attempt(we,r,p):p)(h):l?r(h):p(h)}function p(h){return u._balanced=!0,t(h)}}function Be(n,r,t){return e;function e(c){return n.enter("resource"),n.enter("resourceMarker"),n.consume(c),n.exit("resourceMarker"),dn(n,i)}function i(c){return c===41?a(c):it(n,u,t,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(c)}function u(c){return Y(c)?dn(n,l)(c):a(c)}function l(c){return c===34||c===39||c===40?lt(n,dn(n,a),t,"resourceTitle","resourceTitleMarker","resourceTitleString")(c):a(c)}function a(c){return c===41?(n.enter("resourceMarker"),n.consume(c),n.exit("resourceMarker"),n.exit("resource"),r):t(c)}}function Te(n,r,t){const e=this;return i;function i(l){return ut.call(e,n,u,t,"reference","referenceMarker","referenceString")(l)}function u(l){return e.parser.defined.includes(fn(e.sliceSerialize(e.events[e.events.length-1][1]).slice(1,-1)))?r(l):t(l)}}function De(n,r,t){return e;function e(u){return n.enter("reference"),n.enter("referenceMarker"),n.consume(u),n.exit("referenceMarker"),i}function i(u){return u===93?(n.enter("referenceMarker"),n.consume(u),n.exit("referenceMarker"),n.exit("reference"),r):t(u)}}const Le={name:"labelStartImage",tokenize:Oe,resolveAll:Ln.resolveAll};function Oe(n,r,t){const e=this;return i;function i(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),u}function u(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),l):t(a)}function l(a){return a===94&&"_hiddenFootnoteSupport"in e.parser.constructs?t(a):r(a)}}const Pe={name:"labelStartLink",tokenize:_e,resolveAll:Ln.resolveAll};function _e(n,r,t){const e=this;return i;function i(l){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(l),n.exit("labelMarker"),n.exit("labelLink"),u}function u(l){return l===94&&"_hiddenFootnoteSupport"in e.parser.constructs?t(l):r(l)}}const wn={name:"lineEnding",tokenize:Me};function Me(n,r){return t;function t(e){return n.enter("lineEnding"),n.consume(e),n.exit("lineEnding"),B(n,r,"linePrefix")}}const bn={name:"thematicBreak",tokenize:Re};function Re(n,r,t){let e=0,i;return u;function u(c){return n.enter("thematicBreak"),i=c,l(c)}function l(c){return c===i?(n.enter("thematicBreakSequence"),a(c)):j(c)?B(n,l,"whitespace")(c):e<3||c!==null&&!w(c)?t(c):(n.exit("thematicBreak"),r(c))}function a(c){return c===i?(n.consume(c),e++,a):(n.exit("thematicBreakSequence"),l(c))}}const $={name:"list",tokenize:He,continuation:{tokenize:Ve},exit:Qe},qe={tokenize:Ue,partial:!0},je={tokenize:Ne,partial:!0};function He(n,r,t){const e=this,i=e.events[e.events.length-1];let u=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return a;function a(f){const k=e.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(k==="listUnordered"?!e.containerState.marker||f===e.containerState.marker:An(f)){if(e.containerState.type||(e.containerState.type=k,n.enter(k,{_container:!0})),k==="listUnordered")return n.enter("listItemPrefix"),f===42||f===45?n.check(bn,t,p)(f):p(f);if(!e.interrupt||f===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(f)}return t(f)}function c(f){return An(f)&&++l<10?(n.consume(f),c):(!e.interrupt||l<2)&&(e.containerState.marker?f===e.containerState.marker:f===41||f===46)?(n.exit("listItemValue"),p(f)):t(f)}function p(f){return n.enter("listItemMarker"),n.consume(f),n.exit("listItemMarker"),e.containerState.marker=e.containerState.marker||f,n.check(yn,e.interrupt?t:h,n.attempt(qe,g,x))}function h(f){return e.containerState.initialBlankLine=!0,u++,g(f)}function x(f){return j(f)?(n.enter("listItemPrefixWhitespace"),n.consume(f),n.exit("listItemPrefixWhitespace"),g):t(f)}function g(f){return e.containerState.size=u+e.sliceSerialize(n.exit("listItemPrefix"),!0).length,r(f)}}function Ve(n,r,t){const e=this;return e.containerState._closeFlow=void 0,n.check(yn,i,u);function i(a){return e.containerState.furtherBlankLines=e.containerState.furtherBlankLines||e.containerState.initialBlankLine,B(n,r,"listItemIndent",e.containerState.size+1)(a)}function u(a){return e.containerState.furtherBlankLines||!j(a)?(e.containerState.furtherBlankLines=void 0,e.containerState.initialBlankLine=void 0,l(a)):(e.containerState.furtherBlankLines=void 0,e.containerState.initialBlankLine=void 0,n.attempt(je,r,l)(a))}function l(a){return e.containerState._closeFlow=!0,e.interrupt=void 0,B(n,n.attempt($,r,t),"linePrefix",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Ne(n,r,t){const e=this;return B(n,i,"listItemIndent",e.containerState.size+1);function i(u){const l=e.events[e.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===e.containerState.size?r(u):t(u)}}function Qe(n){n.exit(this.containerState.type)}function Ue(n,r,t){const e=this;return B(n,i,"listItemPrefixWhitespace",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(u){const l=e.events[e.events.length-1];return!j(u)&&l&&l[1].type==="listItemPrefixWhitespace"?r(u):t(u)}}const Yn={name:"setextUnderline",tokenize:$e,resolveTo:We};function We(n,r){let t=n.length,e,i,u;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){e=t;break}n[t][1].type==="paragraph"&&(i=t)}else n[t][1].type==="content"&&n.splice(t,1),!u&&n[t][1].type==="definition"&&(u=t);const l={type:"setextHeading",start:Object.assign({},n[i][1].start),end:Object.assign({},n[n.length-1][1].end)};return n[i][1].type="setextHeadingText",u?(n.splice(i,0,["enter",l,r]),n.splice(u+1,0,["exit",n[e][1],r]),n[e][1].end=Object.assign({},n[u][1].end)):n[e][1]=l,n.push(["exit",l,r]),n}function $e(n,r,t){const e=this;let i=e.events.length,u,l;for(;i--;)if(e.events[i][1].type!=="lineEnding"&&e.events[i][1].type!=="linePrefix"&&e.events[i][1].type!=="content"){l=e.events[i][1].type==="paragraph";break}return a;function a(h){return!e.parser.lazy[e.now().line]&&(e.interrupt||l)?(n.enter("setextHeadingLine"),n.enter("setextHeadingLineSequence"),u=h,c(h)):t(h)}function c(h){return h===u?(n.consume(h),c):(n.exit("setextHeadingLineSequence"),B(n,p,"lineSuffix")(h))}function p(h){return h===null||w(h)?(n.exit("setextHeadingLine"),r(h)):t(h)}}const Ze={tokenize:Ye};function Ye(n){const r=this,t=n.attempt(yn,e,n.attempt(this.parser.constructs.flowInitial,i,B(n,n.attempt(this.parser.constructs.flow,i,n.attempt(te,i)),"linePrefix")));return t;function e(u){if(u===null){n.consume(u);return}return n.enter("lineEndingBlank"),n.consume(u),n.exit("lineEndingBlank"),r.currentConstruct=void 0,t}function i(u){if(u===null){n.consume(u);return}return n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),r.currentConstruct=void 0,t}}const Ge={resolveAll:ot()},Je=at("string"),Ke=at("text");function at(n){return{tokenize:r,resolveAll:ot(n==="text"?Xe:void 0)};function r(t){const e=this,i=this.parser.constructs[n],u=t.attempt(i,l,a);return l;function l(h){return p(h)?u(h):a(h)}function a(h){if(h===null){t.consume(h);return}return t.enter("data"),t.consume(h),c}function c(h){return p(h)?(t.exit("data"),u(h)):(t.consume(h),c)}function p(h){if(h===null)return!0;const x=i[h];let g=-1;if(x)for(;++g<x.length;){const f=x[g];if(!f.previous||f.previous.call(e,e.previous))return!0}return!1}}}function ot(n){return r;function r(t,e){let i=-1,u;for(;++i<=t.length;)u===void 0?t[i]&&t[i][1].type==="data"&&(u=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==u+2&&(t[u][1].end=t[i-1][1].end,t.splice(u+2,i-u-2),i=u+2),u=void 0);return n?n(t,e):t}}function Xe(n,r){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const e=n[t-1][1],i=r.sliceStream(e);let u=i.length,l=-1,a=0,c;for(;u--;){const p=i[u];if(typeof p=="string"){for(l=p.length;p.charCodeAt(l-1)===32;)a++,l--;if(l)break;l=-1}else if(p===-2)c=!0,a++;else if(p!==-1){u++;break}}if(a){const p={type:t===n.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{line:e.end.line,column:e.end.column-a,offset:e.end.offset-a,_index:e.start._index+u,_bufferIndex:u?l:e.start._bufferIndex+l},end:Object.assign({},e.end)};e.end=Object.assign({},p.start),e.start.offset===e.end.offset?Object.assign(e,p):(n.splice(t,0,["enter",p,r],["exit",p,r]),t+=2)}t++}return n}function ve(n,r,t){let e=Object.assign(t?Object.assign({},t):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},u=[];let l=[],a=[];const c={consume:_,enter:S,exit:D,attempt:P(L),check:P(d),interrupt:P(d,{interrupt:!0})},p={previous:null,code:null,containerState:{},events:[],parser:n,sliceStream:f,sliceSerialize:g,now:k,defineSkip:T,write:x};let h=r.tokenize.call(p,c);return r.resolveAll&&u.push(r),p;function x(y){return l=Z(l,y),O(),l[l.length-1]!==null?[]:(R(r,0),p.events=Tn(u,p.events,p),p.events)}function g(y,C){return tr(f(y),C)}function f(y){return nr(l,y)}function k(){return Object.assign({},e)}function T(y){i[y.line]=y.column,N()}function O(){let y;for(;e._index<l.length;){const C=l[e._index];if(typeof C=="string")for(y=e._index,e._bufferIndex<0&&(e._bufferIndex=0);e._index===y&&e._bufferIndex<C.length;)F(C.charCodeAt(e._bufferIndex));else F(C)}}function F(y){h=h(y)}function _(y){w(y)?(e.line++,e.column=1,e.offset+=y===-3?2:1,N()):y!==-1&&(e.column++,e.offset++),e._bufferIndex<0?e._index++:(e._bufferIndex++,e._bufferIndex===l[e._index].length&&(e._bufferIndex=-1,e._index++)),p.previous=y}function S(y,C){const A=C||{};return A.type=y,A.start=k(),p.events.push(["enter",A,p]),a.push(A),A}function D(y){const C=a.pop();return C.end=k(),p.events.push(["exit",C,p]),C}function L(y,C){R(y,C.from)}function d(y,C){C.restore()}function P(y,C){return A;function A(U,G,nn){let J,Q,W,H;return Array.isArray(U)?o(U):"tokenize"in U?o([U]):s(U);function s(V){return K;function K(ln){const pn=ln!==null&&V[ln],mn=ln!==null&&V.null,Sn=[...Array.isArray(pn)?pn:pn?[pn]:[],...Array.isArray(mn)?mn:mn?[mn]:[]];return o(Sn)(ln)}}function o(V){return J=V,Q=0,V.length===0?nn:cn(V[Q])}function cn(V){return K;function K(ln){return H=q(),W=V,V.partial||(p.currentConstruct=V),V.name&&p.parser.constructs.disable.null.includes(V.name)?hn():V.tokenize.call(C?Object.assign(Object.create(p),C):p,c,xn,hn)(ln)}}function xn(V){return y(W,H),G}function hn(V){return H.restore(),++Q<J.length?cn(J[Q]):nn}}}function R(y,C){y.resolveAll&&!u.includes(y)&&u.push(y),y.resolve&&en(p.events,C,p.events.length-C,y.resolve(p.events.slice(C),p)),y.resolveTo&&(p.events=y.resolveTo(p.events,p))}function q(){const y=k(),C=p.previous,A=p.currentConstruct,U=p.events.length,G=Array.from(a);return{restore:nn,from:U};function nn(){e=y,p.previous=C,p.currentConstruct=A,p.events.length=U,a=G,N()}}function N(){e.line in i&&e.column<2&&(e.column=i[e.line],e.offset+=i[e.line]-1)}}function nr(n,r){const t=r.start._index,e=r.start._bufferIndex,i=r.end._index,u=r.end._bufferIndex;let l;return t===i?l=[n[t].slice(e,u)]:(l=n.slice(t,i),e>-1&&(l[0]=l[0].slice(e)),u>0&&l.push(n[i].slice(0,u))),l}function tr(n,r){let t=-1;const e=[];let i;for(;++t<n.length;){const u=n[t];let l;if(typeof u=="string")l=u;else switch(u){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=r?" ":"	";break}case-1:{if(!r&&i)continue;l=" ";break}default:l=String.fromCharCode(u)}i=u===-2,e.push(l)}return e.join("")}const er={[42]:$,[43]:$,[45]:$,[48]:$,[49]:$,[50]:$,[51]:$,[52]:$,[53]:$,[54]:$,[55]:$,[56]:$,[57]:$,[62]:nt},rr={[91]:le},ir={[-2]:En,[-1]:En,[32]:En},ur={[35]:pe,[42]:bn,[45]:[Yn,bn],[60]:ge,[61]:Yn,[95]:bn,[96]:$n,[126]:$n},lr={[38]:et,[92]:tt},ar={[-5]:wn,[-4]:wn,[-3]:wn,[33]:Le,[38]:et,[42]:In,[60]:[qt,ye],[91]:Pe,[92]:[ce,tt],[93]:Ln,[95]:In,[96]:Jt},or={null:[In,Ge]},sr={null:[42,95]},cr={null:[]},hr=Object.freeze(Object.defineProperty({__proto__:null,document:er,contentInitial:rr,flowInitial:ir,flow:ur,string:lr,text:ar,insideSpan:or,attentionMarkers:sr,disable:cr},Symbol.toStringTag,{value:"Module"}));function pr(n={}){const r=Ct([hr].concat(n.extensions||[])),t={defined:[],lazy:{},constructs:r,content:e(Dt),document:e(Ot),flow:e(Ze),string:e(Je),text:e(Ke)};return t;function e(i){return u;function u(l){return ve(t,i,l)}}}const Gn=/[\0\t\n\r]/g;function mr(){let n=1,r="",t=!0,e;return i;function i(u,l,a){const c=[];let p,h,x,g,f;for(u=r+u.toString(l),x=0,r="",t&&(u.charCodeAt(0)===65279&&x++,t=void 0);x<u.length;){if(Gn.lastIndex=x,p=Gn.exec(u),g=p&&p.index!==void 0?p.index:u.length,f=u.charCodeAt(g),!p){r=u.slice(x);break}if(f===10&&x===g&&e)c.push(-3),e=void 0;else switch(e&&(c.push(-5),e=void 0),x<g&&(c.push(u.slice(x,g)),n+=g-x),f){case 0:{c.push(65533),n++;break}case 9:{for(h=Math.ceil(n/4)*4,c.push(-2);n++<h;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:e=!0,n=1}x=g+1}return a&&(e&&c.push(-5),r&&c.push(r),c.push(null)),c}}function fr(n){for(;!rt(n););return n}function st(n,r){const t=Number.parseInt(n,r);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"\uFFFD":String.fromCharCode(t)}const xr=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function gr(n){return n.replace(xr,kr)}function kr(n,r,t){if(r)return r;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),u=i===120||i===88;return st(t.slice(u?2:1),u?16:10)}return Dn(t)||n}function Fn(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?Jn(n.position):"start"in n||"end"in n?Jn(n):"line"in n||"column"in n?Bn(n):""}function Bn(n){return Kn(n&&n.line)+":"+Kn(n&&n.column)}function Jn(n){return Bn(n&&n.start)+"-"+Bn(n&&n.end)}function Kn(n){return n&&typeof n=="number"?n:1}const ct={}.hasOwnProperty,Fr=function(n,r,t){return typeof r!="string"&&(t=r,r=void 0),dr(t)(fr(pr(t).document().write(mr()(n,r,!0))))};function dr(n){const r={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Rn),autolinkProtocol:y,autolinkEmail:y,atxHeading:a(Pn),blockQuote:a(Sn),characterEscape:y,characterReference:y,codeFenced:a(On),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:a(On,c),codeText:a(pt,c),codeTextData:y,data:y,codeFlowValue:y,definition:a(mt),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:a(ft),hardBreakEscape:a(_n),hardBreakTrailing:a(_n),htmlFlow:a(Mn,c),htmlFlowData:y,htmlText:a(Mn,c),htmlTextData:y,image:a(xt),label:c,link:a(Rn),listItem:a(gt),listItemValue:k,listOrdered:a(qn,f),listUnordered:a(qn),paragraph:a(kt),reference:hn,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:a(Pn),strong:a(dt),thematicBreak:a(Ft)},exit:{atxHeading:h(),atxHeadingSequence:P,autolink:h(),autolinkEmail:mn,autolinkProtocol:pn,blockQuote:h(),characterEscapeValue:C,characterReferenceMarkerHexadecimal:K,characterReferenceMarkerNumeric:K,characterReferenceValue:ln,codeFenced:h(_),codeFencedFence:F,codeFencedFenceInfo:T,codeFencedFenceMeta:O,codeFlowValue:C,codeIndented:h(S),codeText:h(J),codeTextData:C,data:C,definition:h(),definitionDestinationString:d,definitionLabelString:D,definitionTitleString:L,emphasis:h(),hardBreakEscape:h(U),hardBreakTrailing:h(U),htmlFlow:h(G),htmlFlowData:C,htmlText:h(nn),htmlTextData:C,image:h(W),label:s,labelText:H,lineEnding:A,link:h(Q),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:V,resourceDestinationString:o,resourceTitleString:cn,resource:xn,setextHeading:h(N),setextHeadingLineSequence:q,setextHeadingText:R,strong:h(),thematicBreak:h()}};ht(r,(n||{}).mdastExtensions||[]);const t={};return e;function e(m){let b={type:"root",children:[]};const E={stack:[b],tokenStack:[],config:r,enter:p,exit:x,buffer:c,resume:g,setData:u,getData:l},z=[];let I=-1;for(;++I<m.length;)if(m[I][1].type==="listOrdered"||m[I][1].type==="listUnordered")if(m[I][0]==="enter")z.push(I);else{const X=z.pop();I=i(m,X,I)}for(I=-1;++I<m.length;){const X=r[m[I][0]];ct.call(X,m[I][1].type)&&X[m[I][1].type].call(Object.assign({sliceSerialize:m[I][2].sliceSerialize},E),m[I][1])}if(E.tokenStack.length>0){const X=E.tokenStack[E.tokenStack.length-1];(X[1]||Xn).call(E,void 0,X[0])}for(b.position={start:on(m.length>0?m[0][1].start:{line:1,column:1,offset:0}),end:on(m.length>0?m[m.length-2][1].end:{line:1,column:1,offset:0})},I=-1;++I<r.transforms.length;)b=r.transforms[I](b)||b;return b}function i(m,b,E){let z=b-1,I=-1,X=!1,an,rn,gn,kn;for(;++z<=E;){const M=m[z];if(M[1].type==="listUnordered"||M[1].type==="listOrdered"||M[1].type==="blockQuote"?(M[0]==="enter"?I++:I--,kn=void 0):M[1].type==="lineEndingBlank"?M[0]==="enter"&&(an&&!kn&&!I&&!gn&&(gn=z),kn=void 0):M[1].type==="linePrefix"||M[1].type==="listItemValue"||M[1].type==="listItemMarker"||M[1].type==="listItemPrefix"||M[1].type==="listItemPrefixWhitespace"||(kn=void 0),!I&&M[0]==="enter"&&M[1].type==="listItemPrefix"||I===-1&&M[0]==="exit"&&(M[1].type==="listUnordered"||M[1].type==="listOrdered")){if(an){let Cn=z;for(rn=void 0;Cn--;){const un=m[Cn];if(un[1].type==="lineEnding"||un[1].type==="lineEndingBlank"){if(un[0]==="exit")continue;rn&&(m[rn][1].type="lineEndingBlank",X=!0),un[1].type="lineEnding",rn=Cn}else if(!(un[1].type==="linePrefix"||un[1].type==="blockQuotePrefix"||un[1].type==="blockQuotePrefixWhitespace"||un[1].type==="blockQuoteMarker"||un[1].type==="listItemIndent"))break}gn&&(!rn||gn<rn)&&(an._spread=!0),an.end=Object.assign({},rn?m[rn][1].start:M[1].end),m.splice(rn||z,0,["exit",an,M[2]]),z++,E++}M[1].type==="listItemPrefix"&&(an={type:"listItem",_spread:!1,start:Object.assign({},M[1].start)},m.splice(z,0,["enter",an,M[2]]),z++,E++,gn=void 0,kn=!0)}}return m[b][1]._spread=X,E}function u(m,b){t[m]=b}function l(m){return t[m]}function a(m,b){return E;function E(z){p.call(this,m(z),z),b&&b.call(this,z)}}function c(){this.stack.push({type:"fragment",children:[]})}function p(m,b,E){return this.stack[this.stack.length-1].children.push(m),this.stack.push(m),this.tokenStack.push([b,E]),m.position={start:on(b.start)},m}function h(m){return b;function b(E){m&&m.call(this,E),x.call(this,E)}}function x(m,b){const E=this.stack.pop(),z=this.tokenStack.pop();if(z)z[0].type!==m.type&&(b?b.call(this,m,z[0]):(z[1]||Xn).call(this,m,z[0]));else throw new Error("Cannot close `"+m.type+"` ("+Fn({start:m.start,end:m.end})+"): it\u2019s not open");return E.position.end=on(m.end),E}function g(){return yt(this.stack.pop())}function f(){u("expectingFirstListItemValue",!0)}function k(m){if(l("expectingFirstListItemValue")){const b=this.stack[this.stack.length-2];b.start=Number.parseInt(this.sliceSerialize(m),10),u("expectingFirstListItemValue")}}function T(){const m=this.resume(),b=this.stack[this.stack.length-1];b.lang=m}function O(){const m=this.resume(),b=this.stack[this.stack.length-1];b.meta=m}function F(){l("flowCodeInside")||(this.buffer(),u("flowCodeInside",!0))}function _(){const m=this.resume(),b=this.stack[this.stack.length-1];b.value=m.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),u("flowCodeInside")}function S(){const m=this.resume(),b=this.stack[this.stack.length-1];b.value=m.replace(/(\r?\n|\r)$/g,"")}function D(m){const b=this.resume(),E=this.stack[this.stack.length-1];E.label=b,E.identifier=fn(this.sliceSerialize(m)).toLowerCase()}function L(){const m=this.resume(),b=this.stack[this.stack.length-1];b.title=m}function d(){const m=this.resume(),b=this.stack[this.stack.length-1];b.url=m}function P(m){const b=this.stack[this.stack.length-1];if(!b.depth){const E=this.sliceSerialize(m).length;b.depth=E}}function R(){u("setextHeadingSlurpLineEnding",!0)}function q(m){const b=this.stack[this.stack.length-1];b.depth=this.sliceSerialize(m).charCodeAt(0)===61?1:2}function N(){u("setextHeadingSlurpLineEnding")}function y(m){const b=this.stack[this.stack.length-1];let E=b.children[b.children.length-1];(!E||E.type!=="text")&&(E=bt(),E.position={start:on(m.start)},b.children.push(E)),this.stack.push(E)}function C(m){const b=this.stack.pop();b.value+=this.sliceSerialize(m),b.position.end=on(m.end)}function A(m){const b=this.stack[this.stack.length-1];if(l("atHardBreak")){const E=b.children[b.children.length-1];E.position.end=on(m.end),u("atHardBreak");return}!l("setextHeadingSlurpLineEnding")&&r.canContainEols.includes(b.type)&&(y.call(this,m),C.call(this,m))}function U(){u("atHardBreak",!0)}function G(){const m=this.resume(),b=this.stack[this.stack.length-1];b.value=m}function nn(){const m=this.resume(),b=this.stack[this.stack.length-1];b.value=m}function J(){const m=this.resume(),b=this.stack[this.stack.length-1];b.value=m}function Q(){const m=this.stack[this.stack.length-1];if(l("inReference")){const b=l("referenceType")||"shortcut";m.type+="Reference",m.referenceType=b,delete m.url,delete m.title}else delete m.identifier,delete m.label;u("referenceType")}function W(){const m=this.stack[this.stack.length-1];if(l("inReference")){const b=l("referenceType")||"shortcut";m.type+="Reference",m.referenceType=b,delete m.url,delete m.title}else delete m.identifier,delete m.label;u("referenceType")}function H(m){const b=this.sliceSerialize(m),E=this.stack[this.stack.length-2];E.label=gr(b),E.identifier=fn(b).toLowerCase()}function s(){const m=this.stack[this.stack.length-1],b=this.resume(),E=this.stack[this.stack.length-1];if(u("inReference",!0),E.type==="link"){const z=m.children;E.children=z}else E.alt=b}function o(){const m=this.resume(),b=this.stack[this.stack.length-1];b.url=m}function cn(){const m=this.resume(),b=this.stack[this.stack.length-1];b.title=m}function xn(){u("inReference")}function hn(){u("referenceType","collapsed")}function V(m){const b=this.resume(),E=this.stack[this.stack.length-1];E.label=b,E.identifier=fn(this.sliceSerialize(m)).toLowerCase(),u("referenceType","full")}function K(m){u("characterReferenceType",m.type)}function ln(m){const b=this.sliceSerialize(m),E=l("characterReferenceType");let z;E?(z=st(b,E==="characterReferenceMarkerNumeric"?10:16),u("characterReferenceType")):z=Dn(b);const I=this.stack.pop();I.value+=z,I.position.end=on(m.end)}function pn(m){C.call(this,m);const b=this.stack[this.stack.length-1];b.url=this.sliceSerialize(m)}function mn(m){C.call(this,m);const b=this.stack[this.stack.length-1];b.url="mailto:"+this.sliceSerialize(m)}function Sn(){return{type:"blockquote",children:[]}}function On(){return{type:"code",lang:null,meta:null,value:""}}function pt(){return{type:"inlineCode",value:""}}function mt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ft(){return{type:"emphasis",children:[]}}function Pn(){return{type:"heading",depth:void 0,children:[]}}function _n(){return{type:"break"}}function Mn(){return{type:"html",value:""}}function xt(){return{type:"image",title:null,url:"",alt:null}}function Rn(){return{type:"link",title:null,url:"",children:[]}}function qn(m){return{type:"list",ordered:m.type==="listOrdered",start:null,spread:m._spread,children:[]}}function gt(m){return{type:"listItem",spread:m._spread,checked:null,children:[]}}function kt(){return{type:"paragraph",children:[]}}function dt(){return{type:"strong",children:[]}}function bt(){return{type:"text",value:""}}function Ft(){return{type:"thematicBreak"}}}function on(n){return{line:n.line,column:n.column,offset:n.offset}}function ht(n,r){let t=-1;for(;++t<r.length;){const e=r[t];Array.isArray(e)?ht(n,e):br(n,e)}}function br(n,r){let t;for(t in r)if(ct.call(r,t)){if(t==="canContainEols"){const e=r[t];e&&n[t].push(...e)}else if(t==="transforms"){const e=r[t];e&&n[t].push(...e)}else if(t==="enter"||t==="exit"){const e=r[t];e&&Object.assign(n[t],e)}}}function Xn(n,r){throw n?new Error("Cannot close `"+n.type+"` ("+Fn({start:n.start,end:n.end})+"): a different token (`"+r.type+"`, "+Fn({start:r.start,end:r.end})+") is open"):new Error("Cannot close document, a token (`"+r.type+"`, "+Fn({start:r.start,end:r.end})+") is still open")}export{Fr as fromMarkdown};
